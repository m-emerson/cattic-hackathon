DROP TABLE booksearch.COURSES;
DROP TABLE booksearch.TEXTBOOKS;
DROP TABLE booksearch.TEXTBOOK_EDITIONS;
DROP TABLE booksearch.USERS;
DROP TABLE booksearch.COURSE_TEXTBOOK_LINK;
DROP TABLE booksearch.LISTINGS;
CREATE DATABASE booksearch;
USE booksearch;
CREATE TABLE COURSES (COURSEID INT(6) UNSIGNED NOT NULL AUTO_INCREMENT, CODE VARCHAR(8) NOT NULL, NAME VARCHAR(100) NOT NULL, SEMESTER VARCHAR(1) NOT NULL, PRIMARY KEY(COURSEID), UNIQUE KEY course (CODE));
CREATE TABLE TEXTBOOKS (TEXTBOOKID INT UNSIGNED NOT NULL AUTO_INCREMENT, NAME VARCHAR(300) NOT NULL, PRIMARY KEY(TEXTBOOKID));
CREATE TABLE TEXTBOOK_EDITIONS (ISBN BIGINT UNSIGNED NOT NULL, MASTER_TEXTBOOKID INT UNSIGNED NOT NULL, PHOTO BLOB, DESCRIPTION VARCHAR(1000), AUTHOR VARCHAR(200), EDITION VARCHAR(40), PRIMARY KEY(ISBN));
CREATE TABLE USERS (USERID INT UNSIGNED NOT NULL AUTO_INCREMENT, USERNAME VARCHAR(50) NOT NULL, PASSWORD VARCHAR(500) NOT NULL, EMAIL VARCHAR(200) NOT NULL, NAME VARCHAR(200) NOT NULL, PRIMARY KEY(USERID), UNIQUE KEY user_username (USERNAME));
CREATE TABLE COURSE_TEXTBOOK_LINK (COURSE_TEXTBOOK_LINK_ID INT UNSIGNED NOT NULL AUTO_INCREMENT, COURSEID INT UNSIGNED NOT NULL, TEXTBOOKID BIGINT UNSIGNED NOT NULL, REQUIRED_STATUS VARCHAR(15),  PRIMARY KEY(COURSE_TEXTBOOK_LINK_ID));
CREATE TABLE LISTINGS (LISTINGID INT UNSIGNED NOT NULL AUTO_INCREMENT, TEXTBOOK_ISBN BIGINT UNSIGNED NOT NULL, USERID INT UNSIGNED NOT NULL, PRICE INT NOT NULL, ITEM_CONDITION VARCHAR(20), PRIMARY KEY(LISTINGID));
GRANT SELECT, INSERT, UPDATE, DELETE ON booksearch.COURSES TO 'book_interface'@'localhost';
GRANT SELECT, INSERT, UPDATE, DELETE ON booksearch.TEXTBOOKS TO 'book_interface'@'localhost';
GRANT SELECT, INSERT, UPDATE, DELETE ON booksearch.USERS TO 'book_interface'@'localhost';
GRANT SELECT, INSERT, UPDATE, DELETE ON booksearch.COURSE_TEXTBOOK_LINK TO 'book_interface'@'localhost';
GRANT SELECT, INSERT, UPDATE, DELETE ON booksearch.LISTINGS TO 'book_interface'@'localhost';
GRANT SELECT, INSERT, UPDATE, DELETE ON booksearch.TEXTBOOK_EDITIONS TO 'book_interface'@'localhost';
GRANT FILE ON *.* TO 'book_interface'@'localhost';
